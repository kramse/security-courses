#!/usr/bin/perl
# modified from original by Henrik Kramshoej, hlk@kramse.dk
# 2004-08-19
#
# Original from:
# http://www.rfc.se/fpdns/timecheck.html

use Net::DNS;

my $resolver = Net::DNS::Resolver->new;
$resolver->nameservers($ARGV[0]);

my $query = Net::DNS::Packet->new;
$query->sign_tsig("n","test");

my $response = $resolver->send($query);
foreach my $rr ($response->additional) {
	print "localtime vs nameserver $ARGV[0] time difference: ";
	print$rr->time_signed - time() if $rr->type eq "TSIG";
	print "\n";
}
