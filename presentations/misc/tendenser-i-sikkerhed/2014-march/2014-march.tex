\documentclass[20pt,landscape,a4paper,footrule]{foils}
\usepackage{solido-network-slides}

\begin{document}
\selectlanguage{danish}
\mytitlepage{Tendenser i sikkerhed\\{\small Marts 2014}}


\vskip 2cm
\centerline{\footnotesize Slides are available as PDF, kramshoej@Github}

\slide{Goals of today}

\begin{list1}
\item Update on trends in information security and internet security
\item Offer input to what things to look into
\vskip 2cm
\item I will try to limit myself to things from 2014
\item Hodge-podge of security related things - inspiration 
\item Please give feedback and join me in discussions, dialogue \smiley
\end{list1}

\slide{Plan for today}

\hlkimage{10cm}{Shaking-hands_web.jpg}

\begin{list1}
\item Kl 17:30-21 and some breaks
\item Less presentation, more talk 
\item Less me talking (only) and more 2.0 social media interaction
\end{list1}

\slide{Generic advice}

Recommendations \hlkrightimage{8cm}{Encrypt_all_the_things.png}
\begin{list2}
\item Lock your devices, phones, tables and computers
\item Update software and apps
\item Do NOT use the same password everywhere
\item Watch out when using open wifi-networks
\item Multiple browsers: one for Facebook, and separate for home banking apps?
\item Multiple laptops? One for private data, one for work?
\item Think of the data you produce, why do people take naked pictures and SnapChat them?
\item Use pseudonyms and aliases, do not use your real name everywhere
\item Enable encryption: IMAP{\bf S}, POP3{\bf S},
  HTTP{\bf S} \\
\end{list2}


\slide{Democracy now: Why do we bother?}

\hlkimage{22cm}{jacob-appelbaum.png}
{\large
In a democracy we need the citizens with freedom that can act without constant surveillance

Democracy requires that we can actively select which personal data to give up and to whom
}


\vskip 2 cm
\centerline{\large Cryptography is peaceful protest against blanket surveillance}

\slide{Why think of security?}

\hlkimage{8cm}{1984-not-instruction-manual.jpg}


\begin{quote}
	Privacy is necessary for an open society in the electronic age. Privacy is not secrecy. A private matter is something one doesn't want the whole world to know, but a secret matter is something one doesn't want anybody to know. Privacy is the power to selectively reveal oneself to the world. ~A Cypherpunk's Manifesto by Eric Hughes, 1993
\end{quote}

Copied from \link{https://cryptoparty.org/wiki/CryptoParty}



\slide{Multiple browsers}

\hlkimage{20cm}{multi-browser-strategy.png}

\begin{list2}
\item Strict Security settings in the general browser, Firefox or Chrome?
\item More lax security settings for "trusted sites" - like home banking
\item Security plugins like HTTPS Everywhere and NoScripts for generic browsing
\end{list2}

\slide{HTTPS Everywhere}

\hlkimage{5cm}{HTTPS_Everywhere_new_logo.jpg}
\begin{quote}
HTTPS Everywhere is a Firefox extension produced as a collaboration between The Tor Project and the Electronic Frontier Foundation. It encrypts your communications with a number of major websites.
\end{quote}

\centerline{\link{http://www.eff.org/https-everywhere}}



% Censurafdelingen
% Twitter blocking, og husk antal Tor brugere i Turkiet vokser voldsomt


\slide{Face reality}

\begin{list2}
\item Criminals sell your credit card information and identity theft
\item Trade infected computers like a commodity
\item Governments write laws that allows them to introduce back-doors - and use these
\item Governments do blanket surveillance of their population
\item Governments implement censorship, threaten citizens and journalist
\item Governments will introduce back-doors in products we use
\item Danish police and TAX authorities have the legals means, see \emph{Rockerloven}
\end{list2}

\vskip 1cm
\centerline{You are not paranoid when there are people actively attacking you!}


\slide{Use protection - always}

\hlkimage{14cm}{protect-from-governments.jpg}
%{\LARGE Protecting yourself against criminals or the government is the same thing!}


\slide{Turkey: Erdogan bans Twitter }

\hlkimage{12cm}{twitter-turkey.png}

\slide{Censorship on the internet - lol}

\centerline{\color{titlecolor} The Net interprets censorship as damage and routes around it.}

\hlkimage{22cm}{John-Gilmore-quotes.png}

\link{http://en.wikiquote.org/wiki/John_Gilmore}\\
\link{http://en.wikipedia.org/wiki/John_Gilmore_(activist)}

\slide{Directly connection Tor Users from Turkey}

\hlkimage{20cm}{userstats-relay-country-2013-12-25-off-2014-03-25-tr.png}

Image from \link{https://metrics.torproject.org}\\
via \link{https://twitter.com/runasand}

\slide{Directly connection Tor Users from Turkey +10.000}

\hlkimage{20cm}{userstats-relay-country-2013-12-25-off-2014-03-26-tr.png}

Image from \link{https://metrics.torproject.org} via 
\link{https://twitter.com/ioc32/status/448791582423408640}

\slide{Tor project install}

\hlkimage{12cm}{tor-project.png}

Der findes diverse tools til Tor, Torbutton on/off knap til Firefox osv.

Det anbefales at bruge Torbrowser bundles fra \link{https://www.torproject.org/}

\slide{Torbrowser - anonym browser}

\hlkimage{20cm}{torbrowser-main-window.png}

\centerline{\color{titlecolor} Mere anonym browser - Firefox in disguise}


\slide{Torbrowser - sample site}

\hlkimage{18cm}{sample-tor-site.png}

\centerline{\color{titlecolor} .onion er Tor adresser - hidden sites}

{\footnotesize Den viste side er SecureDrop hos Radio24syv \link{http://www.radio24syv.dk/dig-og-radio24syv/securedrop/}}



\slide{Whonix - Tor to the max!}

\hlkimage{17cm}{400px-Whonix.jpg}

\begin{quote}
Whonix is an operating system focused on anonymity, privacy and security. It's based on the Tor anonymity network[5], Debian GNU/Linux[6] and security by isolation. DNS leaks are impossible, and not even malware with root privileges can find out the user's real IP. \link{https://www.whonix.org/}

\end{quote}

\centerline{Torbrowser er godt, Whonix giver lidt ekstra sikkerhed}


\slide{Secure your mobile}

\hlkimage{20cm}{the-guardian-project.pdf}

\centerline{Dont forget your mobile platforms \link{https://guardianproject.info/}}


%\slide{The Enemies of Internet}
%Special Edition : Surveillance

%\link{http://surveillance.rsf.org/en/}

% DDoS NTP, DNS so last year

\slide{www.uncensoreddns.org}

\hlkimage{20cm}{censurfridns-1.png}

\slide{DNSSEC trigger}

\hlkimage{7cm}{dnssec-trigger.png}

Lots of DNSSEC tools, I recommend DNSSEC-trigger a local name server for your laptop

\begin{list2}
\item DNSSEC Validator for firefox\\ \link{https://addons.mozilla.org/en-us/firefox/addon/dnssec-validator/}
\item OARC tools \link{https://www.dns-oarc.net/oarc/services/odvr}
\item \link{http://www.nlnetlabs.nl/projects/dnssec-trigger/}
\end{list2}


\slide{But DNS is bad! DNS Amplification?!}

\begin{quote}
This is the official homepage for PacketQ, a simple tool to make SQL-queries against PCAP-files, making packet analysis and building statistics simple and quick. PacketQ was previously known as DNS2db but was renamed in 2011 when it was rebuilt and could handle protocols other than DNS among other things.

Look how easy it's to count DNS-packets in a PCAP-file.
\end{quote}

\begin{alltt}
\small
# packetq -s "select count(*) as count_dns from dns" packets.pcap 
[ \{ "table_name": "result",
      "head": [
      \{ "name": "count_dns","type": "int" \} ],   {\bf "data": [ [95501] ] \}} ]
\end{alltt}

\link{https://github.com/dotse/packetq/wiki}\\

\slide{Using PacketQ}

\hlkimage{22cm}{using-packetq.png}

Discussion: bridging the gaps between Devops and Security? Good thing, easy?

\link{http://securityblog.switch.ch/2013/01/22/using-packetq/}




\slide{Big data tools}

\hlkimage{20cm}{kibana-solido.png}
\begin{list1}
\item Moloch \link{https://github.com/aol/moloch}
\item DSC and PacketQ \link{https://github.com/dotse/packetq/wiki}
\item Logstash, Elasticsearch and Kibana
\end{list1}

\slide{Moloch}

\hlkimage{20cm}{moloch-sessions.png}

Picture from \link{https://github.com/aol/moloch}

% Suricata, Logstash, Elasticsearch, D3JShttp://d3js.org/
\slide{Suricata with Dashboards}

\hlkimage{12cm}{kibana-suricata.png}

Picture from Twitter\\
\link{https://twitter.com/nullthreat/status/445969209840128000}\\

New link March 2014: 10Gbits\\
{\small\link{http://pevma.blogspot.se/2014/03/suricata-prepearing-10gbps-network.html}}

\link{http://suricata-ids.org/2014/03/25/suricata-2-0-available/}

\slide{Big Data tools: Elasticsearch}


{\color{green}\Large elasticsearch}

the definitive guide

clinton gormley
zachary tong
Copyright © 2014 Elasticsearch

This work is licensed under a Creative Commons Attribution-NonCommercial-NoDerivs 3.0 Unported License.

{\small
\link{http://www.elasticsearch.org/guide/en/elasticsearch/guide/current/index.html}

\link{http://www.elasticsearch.org/overview/kibana/}

\link{http://www.elasticsearch.org/overview/logstash/}
}

\centerline{We are all Devops now, even security people!}




\slide{Nye tools}

\begin{list1}
\item \link{http://www.kali.org/} Kali Linux Rebirth of BackTrack
\item \link{http://www.arachni-scanner.com/}\\- been on my todolist for too long, try it maybe?
\end{list1}

\slide{Hacker tools BackTrack and Kali}

\hlkimage{14cm}{kali-linux.png}

\begin{list1}
\item Hacking is fun - learn a lot
\item Do it in your own network - your systems, keep it legal
\item Run Kali Linux in a virtual machine
\item Kali Linux \link{http://www.kali.org/} denne version anbefales
\end{list1}



\slide{Network Security Through Data Analysis}

\hlkimage{8cm}{network-security-through-data-analysis.png}

Low page count, but high value! Recommended.

Network Security Through Data Analysis: Building Situational Awareness\\
By Michael Collins\\
Publisher: O'Reilly Media
Released: February 2014 Pages: 348




\slide{ Netflow NFSen}

\hlkimage{22cm}{nfsen-udp-flood.png}

\centerline{An extra 100k packets per second from this netflow source (source is a router)}


\slide{Alert (TA14-017A) UDP-based Amplification Attacks}

\begin{alltt}\small
Protocol   Bandwidth Amplification Factor        Vulnerable Command
DNS        28 to 54          see: TA13-088A [1]
NTP        556.9             see: TA14-013A [2]
SNMPv2       6.3             GetBulk request
NetBIOS      3.8             Name resolution
SSDP        30.8             SEARCH request
CharGEN    358.8             Character generation request
QOTD       140.3             Quote request
BitTorrent   3.8             File search
Kad         16.3             Peer list exchange
Quake Network Protocol 63.9  Server info exchange
Steam Protocol  5.5          Server info exchange
\end{alltt}

Source: US-CERT\\
\link{http://www.us-cert.gov/ncas/alerts/TA14-017A}


\slide{Detecting DDoS}

\hlkimage{15cm}{nfsen-ddos-profile-1.png}

We created a DDoS profile with the common types.

We can ask RDDtools about max, average etc.
\begin{alltt}\small
rrdtool graph x -s -24h DEF:v=DDoS/mx-cph-01.rrd:packets:MAX VDEF:vm=v,MAXIMUM PRINT:vm:%.lf
\end{alltt}




\slide{DDoS traffic before filtering}
\hlkimage{26cm}{ddos-before-filtering}

\centerline{Only two links shown, at least 3Gbit incoming for this single IP}

\slide{DDoS traffic after filtering}
\hlkimage{18cm}{ddos-after-filtering}
\centerline{Link toward server (next level firewall actually) about ~350Mbit outgoing}

\slide{Strategy planning}

\begin{list1}
\item Problem: We receive unauthenticated chaotic traffic

\item Solution: Discard early, discard on edge, reduce noise

\item Only use CPU resources for potentially real traffic
\end{list1}

\slide{Defense in depth - multiple layers of security}

\hlkimage{23cm}{network-layers-1.pdf}


%\slide{Stateless filtering Junos}
\slide{Stateless firewall filter throw stuff away}

\begin{alltt}\footnotesize
hlk@MX-CPH-02> show configuration firewall filter all | no-more
/* This is a sample, better to use BGP flowspec and RTBH */
inactive: term edgeblocker \{
    from \{
        source-address \{
            84.180.xxx.173/32;
...
            87.245.xxx.171/32;
        \}
        destination-address \{
            91.102.91.16/28;
        \}
        protocol [ tcp udp icmp ];
    \}
    then \{
        count edge-block;
        discard;
    \}
\}
\end{alltt}
Hint: can also leave out protocol and then it will match all protocols

\slide{Stateless firewall filter limit protocols}

\begin{alltt}\footnotesize
term limit-icmp \{
    from \{
        protocol icmp;
    \}
    then \{
        policer ICMP-100M;
        accept;
    \}
\}
term limit-udp \{
    from \{
        protocol udp;
    \}
    then \{
        policer UDP-1000M;
        accept;
    \}
\}
\end{alltt}

Routers also have extensive Class-of-Service (CoS) tools today

\slide{Strict filtering for some servers, still stateless!}

\begin{alltt}\footnotesize
term some-server-allow \{
    from \{
        destination-address \{
            109.238.xx.0/xx;
        \}
        protocol tcp;
        destination-port [ 80 443 ];
    \}
    then accept;
\}
term some-server-block-unneeded \{
    from \{
        destination-address \{
            109.238.xx.0/xx;
        \}
        protocol-except icmp;
    \}
    then \{
        count some-server-block;
        discard;
    \}
\}
\end{alltt}

Wut - no UDP, yes UDP service is not used on these servers


\slide{ Firewalls - screens, IDS like features}

When you know regular traffic you can decide:

\begin{alltt}\small
hlk@srx-kas-05# show security screen ids-option untrust-screen
icmp \{    ping-death; \}
ip \{    source-route-option;  tear-drop; \}
tcp \{    Note: UDP flood setting also exist
    syn-flood \{
        alarm-threshold 1024;
        attack-threshold 200;
        source-threshold 1024;
        destination-threshold 2048;
        timeout 20;    \}
    land;
\} Always select your own settings YMMV
\end{alltt}

\begin{list2}
\item Firewalls and security devices have lots of settings
\item How many sessions does a single IP need?
\item This can be done with reduced incoming traffic
\end{list2}

\slide{uRPF unicast Reverse Path Forwarding}

\centerline{\bf Solving DDoS problems uRPF}

\begin{quote}
Reverse path forwarding (RPF) is a technique used in modern routers for the purposes of ensuring loop-free forwarding of multicast packets in multicast routing and to help prevent IP address spoofing in unicast routing.
\end{quote}
Source: \link{http://en.wikipedia.org/wiki/Reverse_path_forwarding}

\slide{Strict vs loose mode RPF}

\hlkimage{24cm}{uRPF-check-1.pdf}

\begin{quote}
{\bf Configuring Unicast RPF Strict Mode}\\
In strict mode, unicast RPF checks whether the incoming packet has a source address that matches a prefix in the routing table, {\bf and whether the interface expects to receive a packet with this source address prefix.}
\end{quote}


\slide{Remotely Triggered Black Hole Configurations}

\hlkimage{10cm}{packetlife-RTBH.png}
Picture from packetlife.net showing  R9 as a standalone "management"\\ router for route injection.

{\footnotesize
\link{http://packetlife.net/blog/2009/jul/6/remotely-triggered-black-hole-rtbh-routing/}\\
\link{https://ripe65.ripe.net/presentations/285-inex-ripe-routingwg-amsterdam-2012-09-27.pdf}\\
\link{https://www.inex.ie/rtbh}}

\slide{Remember those BGP import filters, perhaps try bgpq3} 

\begin{alltt}
hlk@katana:bgpq3-0.1.16$ ./bgpq3 -Jl larsen-data AS197495
policy-options \{
replace:
 prefix-list larsen-data \{
    91.221.196.0/23;
    185.10.8.0/22;
 \}
\}
\end{alltt}

\link{http://snar.spb.ru/prog/bgpq3/}


\slide{Summary: Goal of protection mechanisms}

\begin{list1}
\item DDoS attacks increase in size
\item +100Gb happens regularly
\item Even 200Gb is becoming more common
\item No vendor can deliver a single device with 100\%
\item Slice the attacks - Divide and conquer
\item Use the available features and resources in combination - optimize your infrastructure
\end{list1}

\slide{Allowed traffic to next layer}

\begin{list1}
\item Basic filtering and routers can eliminate a lot

\item Characteristics after employing the techniques:
\item Known bad sources removed 
\item Maximum 100Mbit ICMP
\item Maximum 1000Mbit UDP
\item Only port 80/tcp and 443/tcp to some range
\end{list1}
\centerline{LESS traffic to consider on firewall/next device}

\slide{DDoS in 2014}

\hlkimage{20cm}{arbor-2014-ntp.png}



\slide{Proxy servers - protection services}

\begin{list1}
\item Several big players you need to research before needing them!
\item Arbor Networks sells software solutions for carriers\\
http://www.arbornetworks.com/

\item Prolexic sells DDoS services, DNS and BGP based\\
http://www.prolexic.com/

\item CloudFlare proxy based\\
http://www.cloudflare.com/
\end{list1}




% DDoS og som modvÃ¦gt Jesper Brouer fra DKNOG

% blandede bolscher
% peering policies, Netflix og freeride
% http://www.trefor.net/2014/03/21/peering-policies-peeringweek/

% Mere routing og BGP
% http://bgp-spamd.net/


\slide{Focus for the near future}

\begin{list1}
\item Walk through your infrastructure\\
get a detailed view of data, flows, protocols, bandwidth, ports and services
\item Make sure your organization is also in control, know your vendors
\item Create a list of critical phone numbers and contacts, enter it in your phone
\item Get control of BYOD Bring Your Own Devices
\end{list1}


\slide{History - summer 2013}

\begin{list1}
\item DNS: DNSSEC, TCP queries, IPv6 DNS, DNS reply-size testing
\item More IPv6: 
\item Automatic BGP blackhole routing, perhaps based on input from Suricata/Bro
\item Conferences:\\
RIPE66 Dublin hardcore network people \link{https://ripe66.ripe.net/}\\
OHM2013 Observe Hack Make \link{http://ohm2013.org/}
\end{list1}


\slide{Near future - summer 2014}

\begin{list1}
\item DNS: DNSSEC, DNS statistics, DNS abuse, DNS rate limiting\\
Now part of the censurfridns/uncensoredDNS admin group, yay!
\item More IPv6: Have turned on IPv6 on customer interfaces, now get them to use it.
\item Automatic BGP blackhole routing, perhaps based on input from Suricata/Bro
\item Conferences: definitely TheCamp this summer, perhaps RIPE in Autumn
\end{list1}


\slide{PROSA CTF}

\hlkimage{12cm}{DSCF3910s.jpg}

\begin{list1}
\item PROSA afholder i samarbejde med en mindre gruppe CTF konkurrencer 
%\item Capture the Flag er en mulighed for at afprÃ¸ve sine hackerskillz
\item Robert Chris Larsen er hovedmanden - og tak til ham!
\end{list1}
Kilde: \link{http://ctf2013.the-playground.dk/}


\slide{Sources for information}

\hlkimage{8cm}{twitter-security-feed.png}

\begin{list1}
\item Twitter has replaced RSS for me
\item Email lists are still a good source of data
\item Favourite Security Diary from Internet Storm Center\\
 \link{http://isc.sans.edu/index.html}\\
\link{https://isc.sans.edu/diaryarchive.html?year=2013&month=4}
\end{list1}



\slide{Open Mike night ...}

\vskip 3 cm

\centerline{\Large what did I forget? tells us about your favourites \smiley}

DNS censorship, NemID bashing, Apple malware, Android malware, iPhone malware?

Did you notice how a lot of the links in this presentation uses HTTPS - encrypted

\myquestionspage





\end{document}
